# i18n-typegen
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è TypeScript-—Ç–∏–ø–æ–≤ –¥–ª—è i18next –∏ react-i18next –Ω–∞ –æ—Å–Ω–æ–≤–µ JSON-—Ñ–∞–π–ª–æ–≤ –Ω–µ–π–º—Å–ø–µ–π—Å–æ–≤ –≤ —è–∑—ã–∫–æ–≤—ã—Ö –ø–∞–ø–∫–∞—Ö.

- **–¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∫–ª—é—á–∏ –ø–µ—Ä–µ–≤–æ–¥–æ–≤** —Å –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ–º –≤ `t('ns:key')`
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –∫–ª—é—á–µ–π** —á–µ—Ä–µ–∑ –≤—ã—á–∏—Å–ª—è–µ–º—ã–π —Ç–∏–ø `NestedKeyOf`
- **–î–µ–∫–ª–∞—Ä–∞—Ü–∏–∏ –º–æ–¥—É–ª–µ–π** –¥–ª—è `i18next` –∏ `react-i18next`
- **CLI** —Å –∞–≤—Ç–æ—Å–æ–∑–¥–∞–Ω–∏–µ–º –≤—ã—Ö–æ–¥–Ω–æ–π –ø–∞–ø–∫–∏

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞
```bash
npm install i18n-typegen --save-dev
# –∏–ª–∏
yarn add -D i18n-typegen
# –∏–ª–∏
pnpm add -D i18n-typegen
```

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (CLI)
–£–∫–∞–∂–∏—Ç–µ –ø—É—Ç—å –∫ –ö–û–ù–ö–†–ï–¢–ù–û–ô —è–∑—ã–∫–æ–≤–æ–π –ø–∞–ø–∫–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `./src/locales/en`), –≥–¥–µ –ª–µ–∂–∞—Ç `.json`-—Ñ–∞–π–ª—ã –Ω–µ–π–º—Å–ø–µ–π—Å–æ–≤.

```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–∏–ø–æ–≤ –∏–∑ –≤—Å–µ—Ö .json –≤ –ø–∞–ø–∫–µ ./src/locales/en
# –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤ ./src/lib/i18n/i18n.d.ts
npx i18n-typegen ./src/locales/en ./src/lib/i18n/i18n.d.ts
```

- **–ê—Ä–≥—É–º–µ–Ω—Ç 1**: –ø—É—Ç—å –∫ –ø–∞–ø–∫–µ –Ø–ó–´–ö–ê —Å JSON-—Ñ–∞–π–ª–∞–º–∏ –Ω–µ–π–º—Å–ø–µ–π—Å–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `./src/locales/en`).
- **–ê—Ä–≥—É–º–µ–Ω—Ç 2**: –ø—É—Ç—å –∫ –≤—ã—Ö–æ–¥–Ω–æ–º—É `.d.ts` —Ñ–∞–π–ª—É (–ø–∞–ø–∫–∞ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–∞ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏).

> –ü—Ä–∏–º–µ—Ä –¥–ª—è `package.json`:
```json
{
  "scripts": {
    "i18n:types": "i18n-typegen ./src/locales/en ./src/lib/i18n/i18n.d.ts"
  }
}
```

## –ü–∞—Ä–∞–º–µ—Ç—Ä—ã

`--watch` `-w` - –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ JSON —Ñ–∞–π–ª–æ–≤

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ª–æ–∫–∞–ª–µ–π
–•—Ä–∞–Ω–∏—Ç–µ –Ω–µ–π–º—Å–ø–µ–π—Å—ã –ø–æ —è–∑—ã–∫–∞–º. –£—Ç–∏–ª–∏—Ç–∞ —á–∏—Ç–∞–µ—Ç —Ñ–∞–π–ª—ã —Ç–æ–ª—å–∫–æ –∏–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–π –ø–∞–ø–∫–∏ —è–∑—ã–∫–∞.

```text
src/
‚îî‚îÄ locales/
   ‚îú‚îÄ en/
   ‚îÇ  ‚îú‚îÄ common.json
   ‚îÇ  ‚îî‚îÄ auth.json
   ‚îî‚îÄ ru/
      ‚îú‚îÄ common.json
      ‚îî‚îÄ auth.json
```

–ü—Ä–∏–º–µ—Ä `src/locales/en/common.json`:
```json
{
  "hello": "Hello",
  "menu": {
    "home": "Home",
    "about": "About"
  }
}
```

## –ß—Ç–æ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è
- `declare module 'i18next' { ... }`
- `declare module 'react-i18next' { ... }`
- –¢–∏–ø—ã:
  - `TranslationKeys` ‚Äî –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –∫–ª—é—á–µ–π —Ñ–æ—Ä–º–∞—Ç–∞ `ns:key`
  - `NamespaceKeys<'common'>` ‚Äî –∫–ª—é—á–∏ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –Ω–µ–π–º—Å–ø–µ–π—Å–∞
  - –û—Ç–¥–µ–ª—å–Ω—ã–µ —Ç–∏–ø—ã –≤–∏–¥–∞ `CommonKeys`, `AuthKeys`, ‚Ä¶

–†–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏:
- `keySeparator: '.'` (–≤–ª–æ–∂–µ–Ω–Ω—ã–µ –∫–ª—é—á–∏: `menu.home`)
- `nsSeparator: ':'` (–Ω–µ–π–º—Å–ø–µ–π—Å: `common:menu.home`)

`defaultNS` –±–µ—Ä—ë—Ç—Å—è —Ä–∞–≤–Ω—ã–º –ü–ï–†–í–û–ú–£ –Ω–∞–π–¥–µ–Ω–Ω–æ–º—É `.json` —Ñ–∞–π–ª—É –≤ –ø–∞–ø–∫–µ.

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
```ts
import i18next from 'i18next';

i18next.t('common:hello');       // –æ–∫
i18next.t('common:menu.home');   // –æ–∫
// i18next.t('common:unknown');  // –æ—à–∏–±–∫–∞ —Ç–∏–ø–æ–≤
```

```tsx
import { useTranslation } from 'react-i18next';

function Header() {
  const { t } = useTranslation();
  return (
    <>
      <h1>{t('common:hello')}</h1>
      <nav>{t('common:menu.home')}</nav>
    </>
  );
}
```

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
- –ó–∞–ø—É—Å–∫–∞–π—Ç–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –ø–æ –æ–¥–Ω–æ–º—É –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É —è–∑—ã–∫—É (–æ–±—ã—á–Ω–æ –ø–æ `en` –∫–∞–∫ —ç—Ç–∞–ª–æ–Ω—É —Å—Ç—Ä—É–∫—Ç—É—Ä—ã).
- –°–ª–µ–¥–∏—Ç–µ, —á—Ç–æ–±—ã —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–ª—é—á–µ–π —Å–æ–≤–ø–∞–¥–∞–ª–∞ –≤–æ –≤—Å–µ—Ö —è–∑—ã–∫–∞—Ö.
- –ú–∞—Å—Å–∏–≤—ã –≤ JSON –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É—é—Ç—Å—è –∫–∞–∫ `string` –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞ –ª–∏—Å—Ç–æ–≤—ã—Ö —É–∑–ª–∞—Ö.

## –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã
- –ú–æ–∂–Ω–æ –ª–∏ —É–∫–∞–∑–∞—Ç—å –∫–æ—Ä–µ–Ω—å `./src/locales`?  
  ‚Äî –ù–µ—Ç, —É–∫–∞–∂–∏—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —è–∑—ã–∫–æ–≤—É—é –ø–∞–ø–∫—É, –Ω–∞–ø—Ä–∏–º–µ—Ä `./src/locales/en`.
- –ó–∞—á–µ–º –Ω—É–∂–µ–Ω –æ–¥–∏–Ω —è–∑—ã–∫, –µ—Å–ª–∏ —É –º–µ–Ω—è –Ω–µ—Å–∫–æ–ª—å–∫–æ?  
  ‚Äî –¢–∏–ø—ã –∑–∞–≤–∏—Å—è—Ç –æ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–ª—é—á–µ–π; –æ–±—ã—á–Ω–æ –æ–¥–Ω–æ–≥–æ —ç—Ç–∞–ª–æ–Ω–Ω–æ–≥–æ —è–∑—ã–∫–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ.

## üìú Changelog

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–º. –≤ [CHANGELOG.md](./CHANGELOG.md)

## –õ–∏—Ü–µ–Ω–∑–∏—è
MIT